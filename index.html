<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Trading Journal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#ffffff;
  --text:#111827;
  --primary:#3B82F6;
}
.dark{
  --bg:#0f172a;
  --text:#e5e7eb;
}
body{
  background:var(--bg);
  color:var(--text);
  font-family: Arial, sans-serif;
  max-width:420px;
  margin:auto;
  padding:20px;
}
h2{text-align:center}
input,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  font-size:14px;
}
button{
  background:var(--primary);
  color:white;
  border:none;
  cursor:pointer;
}
.toggle{
  background:#111;
  margin-bottom:10px;
}
</style>
</head>

<body>

<h2>ğŸ“˜ Trading Journal</h2>

<button class="toggle" onclick="toggleDark()">ğŸŒ™ Dark Mode</button>

<form id="tradeForm">

  <input type="date" id="date" required>

  <input type="text" id="pair" placeholder="Pair (XAUUSD)" required>

  <input type="number" step="0.01" id="entry" placeholder="Entry Price" required>

  <input type="number" step="0.01" id="sl" placeholder="Stop Loss" required>

  <input type="number" step="0.01" id="exit" placeholder="Exit Price" required>

  <input type="number" step="0.01" id="lot" placeholder="Lot Size" required>

  <input type="file" id="image" accept="image/*">

  <button type="submit">ğŸ’¾ Save Trade</button>

</form>

<script>
/* ğŸ”´ PASTE YOUR GOOGLE APPS SCRIPT WEB APP URL HERE */
const WEB_APP_URL = "https://script.google.com/macros/s/XXXXXXXX/exec";

/* Session Detection */
function getSession(){
  const h=new Date().getHours();
  if(h<6) return "Asian";
  if(h<13) return "London";
  if(h<21) return "New York";
  return "Asian";
}

/* Dark Mode */
function toggleDark(){
  document.body.classList.toggle("dark");
}

/* Submit Form */
tradeForm.onsubmit = async (e)=>{
  e.preventDefault();

  let imgData="", imgType="";

  if(image.files.length>0){
    const file=image.files[0];
    imgType=file.type;
    imgData=await new Promise(res=>{
      const r=new FileReader();
      r.onload=()=>res(r.result.split(",")[1]);
      r.readAsDataURL(file);
    });
  }

  fetch(WEB_APP_URL,{
    method:"POST",
    body:JSON.stringify({
      date:date.value,
      day:new Date().toLocaleDateString("en-US",{weekday:"long"}),
      pair:pair.value,
      session:getSession(),
      entry:+entry.value,
      sl:+sl.value,
      exit:+exit.value,
      lot:+lot.value,
      image:imgData,
      type:imgType
    })
  })
  .then(()=>alert("âœ… Trade Saved Successfully"))
  .then(()=>tradeForm.reset())
  .catch(()=>alert("âŒ Error saving trade"));
};
</script>

</body>
</html>
